<link rel="stylesheet" href="../css/style.css">
<html>

<body>
  <!--Main Navigation-->
  <header>
    <!-- Include Handlebars from a CDN -->
    <script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"></script>
    <script>
      // compile the template
      var template = Handlebars.compile("Handlebars <b>{{doesWhat}}</b>");
      // execute the compiled template and print the output to the console
      console.log(template({ doesWhat: "rocks!" }));
    </script>

    <script defer type="text/javascript" src="/application/public/js/registration.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/style.css">


    <!--TODO Partial for navbar-->


  </header>

  <!--Main layout-->

  <main>
    <div id="count">
      <button type="button" onclick="loadXMLDoc()">
        Display Images
      </button>
    </div>
    <div id="demo"></div>
    <script>
      var num;
      function loadXMLDoc() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
          if (this.readyState == 4 && this.status == 200) {
            var daGetz = JSON.parse(this.responseText);
            num = daGetz.length;

            daGetz.forEach((obj) => {
              document.getElementById("demo").innerHTML += `<div id=${obj.id} class="gallery" onclick="fadeOut(${obj.id})">
                        <img src=${obj.url} width="600" height="600"/>
                        <img src=${obj.url} width="600" height="600"/>
                        <img src=${obj.url} width="600" height="600"/>
                    <div class="desc">${obj.title}</div>
                    </div>`;
            });
            document.getElementById("count").innerHTML = `${num} Photos`;
          }
        };

        xhttp.open(
          "GET",
          "https://jsonplaceholder.typicode.com/albums/2/photos",
          true
        );
        xhttp.send();
      }
      function fadeOut(id) {
        var element = document.getElementById(id);
        var op = 1;
        var timer = setInterval(function () {
          if (op <= 0.1) {
            clearInterval(timer);
            element.remove();
            num--;
            document.getElementById(
              "count"
            ).innerHTML = `<div>${num} Photos</div>`;
          }
          element.style.opacity = op;
          op -= 0.1;
        }, 50);
      }
    </script>

  </main>

  <!--Main layout-->

  <!--Footer-->
  <footer>

    <img src="https://upload.wikimedia.org/wikipedia/commons/0/09/Zlatan_Ibrahimovi%C4%87_June_2018.jpg" alt="footer">
    <br>
    <div class="footernav">
      <a class="nav-link" rel="noopener" target="_blank" href="../html/index.html">Home</a>
      <a class="nav-link" rel="noopener" target="_blank" href="../html/login.html">Login</a>
      <a class="nav-link" rel="noopener" target="_blank" href="../html/register.html">Register</a>
      <a class="nav-link" rel="noopener" target="_blank" href="..//html/postimage.html">Post Image</a>
      <a class="nav-link" rel="noopener" target="_blank" href="..//html/viewpost.html">View Image</a>

    </div>
  </footer>

  <!--Footer-->
</body>

</html>